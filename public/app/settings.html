<!DOCTYPE html>
<html lang="fr">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6F6T8BL6QY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6F6T8BL6QY');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Param√®tres - Fusionel</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff6b6b; --primary-light: #fff5f5; --dark: #2d3436; --gray: #636e72; --bg: #f8f9fa; --white: #fff; --danger: #d63031; --sidebar-width: 260px; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'DM Sans', sans-serif; background: var(--bg); min-height: 100vh; color: var(--dark); }
        .sidebar { width: var(--sidebar-width); background: var(--white); border-right: 1px solid #eee; height: 100vh; position: fixed; left: 0; top: 0; display: flex; flex-direction: column; }
        .sidebar-header { padding: 20px; border-bottom: 1px solid #eee; }
        .sidebar-logo { display: flex; align-items: center; gap: 10px; text-decoration: none; color: var(--primary); font-family: 'Playfair Display', serif; font-size: 22px; font-weight: 700; }
        .sidebar-logo svg { width: 28px; height: 28px; fill: var(--primary); }
        .sidebar-nav { flex: 1; padding: 15px 0; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 20px; color: var(--gray); text-decoration: none; border-left: 3px solid transparent; font-size: 14px; }
        .nav-item:hover, .nav-item.active { background: var(--primary-light); color: var(--primary); border-left-color: var(--primary); }
        .nav-item svg { width: 20px; height: 20px; }
        .main-content { margin-left: var(--sidebar-width); padding: 30px; }
        .content-wrapper { max-width: 700px; margin: 0 auto; }
        .page-header { margin-bottom: 25px; display: flex; align-items: center; gap: 15px; }
        .page-header h1 { font-family: 'Playfair Display', serif; font-size: 28px; }
        .back-btn { display: none; width: 40px; height: 40px; border-radius: 50%; border: 1px solid #eee; background: var(--white); cursor: pointer; font-size: 18px; }
        .section-card { background: var(--white); border-radius: 16px; padding: 24px; margin-bottom: 20px; }
        .section-title { font-family: 'Playfair Display', serif; font-size: 18px; margin-bottom: 20px; }
        .settings-list { list-style: none; }
        .settings-item { display: flex; align-items: center; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #f0f0f0; }
        .settings-item:last-child { border-bottom: none; }
        .settings-item h4 { font-size: 14px; margin-bottom: 3px; }
        .settings-item p { font-size: 12px; color: var(--gray); }
        .toggle { position: relative; width: 50px; height: 26px; }
        .toggle input { opacity: 0; width: 0; height: 0; }
        .toggle-slider { position: absolute; cursor: pointer; inset: 0; background: #ccc; border-radius: 26px; transition: 0.3s; }
        .toggle-slider:before { content: ""; position: absolute; height: 20px; width: 20px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: 0.3s; }
        .toggle input:checked + .toggle-slider { background: var(--primary); }
        .toggle input:checked + .toggle-slider:before { transform: translateX(24px); }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 5px; font-size: 13px; font-weight: 500; }
        .form-control { width: 100%; padding: 10px 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; }
        .form-control:focus { outline: none; border-color: var(--primary); }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .range-wrap { display: flex; align-items: center; gap: 15px; }
        .range-wrap input[type="range"] { flex: 1; height: 6px; border-radius: 3px; background: #ddd; -webkit-appearance: none; }
        .range-wrap input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%; background: var(--primary); cursor: pointer; }
        .range-val { min-width: 50px; text-align: right; font-weight: 600; color: var(--primary); }
        .btn { padding: 12px 24px; border-radius: 25px; font-size: 14px; font-weight: 600; cursor: pointer; border: none; }
        .btn-primary { background: linear-gradient(135deg, var(--primary), #ff8e8e); color: white; }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-danger { background: var(--danger); color: white; }
        .btn-block { width: 100%; }
        .alert { padding: 12px 16px; border-radius: 10px; margin-bottom: 20px; }
        .alert-success { background: #d4edda; color: #155724; }
        .alert-error { background: #f8d7da; color: #721c24; }
        .mobile-nav { display: none; position: fixed; bottom: 0; left: 0; right: 0; background: var(--white); border-top: 1px solid #eee; padding: 8px 0; }
        .mobile-nav-items { display: flex; justify-content: space-around; }
        .mobile-nav-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: var(--gray); font-size: 10px; }
        .mobile-nav-item.active { color: var(--primary); }
        .mobile-nav-item svg { width: 22px; height: 22px; margin-bottom: 3px; }
        @media (max-width: 900px) { .sidebar { display: none; } .main-content { margin-left: 0; padding: 20px 15px 80px; } .mobile-nav { display: block; } .back-btn { display: flex; align-items: center; justify-content: center; } .form-row { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-header"><a href="../index.html" class="sidebar-logo"><svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>Fusionel</a></div>
        <nav class="sidebar-nav">
            <a href="discover.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>D√©couvrir</a>
            <a href="matches.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>Matchs</a>
            <a href="likes.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>Likes</a>
            <a href="messages.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>Messages</a>
            <a href="profile.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>Mon Profil</a>
            <a href="subscription.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>Premium</a>
            <a href="settings.html" class="nav-item active"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/></svg>Param√®tres</a>
        </nav>
    </aside>
    <main class="main-content">
        <div class="content-wrapper">
            <div class="page-header"><button class="back-btn" onclick="history.back()">‚Üê</button><h1>‚öôÔ∏è Param√®tres</h1></div>
            <div id="alertContainer"></div>
            <div class="section-card">
                <h3 class="section-title">üîç Pr√©f√©rences de recherche</h3>
                <form id="prefsForm">
                    <div class="form-group"><label>Tranche d'√¢ge minimum</label><div class="range-wrap"><input type="range" id="minAge" min="18" max="80" value="18"><span class="range-val" id="minAgeVal">18</span></div></div>
                    <div class="form-group"><label>Tranche d'√¢ge maximum</label><div class="range-wrap"><input type="range" id="maxAge" min="18" max="80" value="50"><span class="range-val" id="maxAgeVal">50</span></div></div>
                    <div class="form-group"><label>Distance maximum (km)</label><div class="range-wrap"><input type="range" id="maxDist" min="5" max="200" value="50"><span class="range-val" id="maxDistVal">50</span></div></div>
                    <ul class="settings-list">
                        <li class="settings-item"><div><h4>Profils avec photo uniquement</h4><p>Ne voir que les profils ayant une photo</p></div><label class="toggle"><input type="checkbox" id="photoOnly" checked><span class="toggle-slider"></span></label></li>
                        <li class="settings-item"><div><h4>Profils v√©rifi√©s uniquement</h4><p>Ne voir que les profils v√©rifi√©s</p></div><label class="toggle"><input type="checkbox" id="verifiedOnly"><span class="toggle-slider"></span></label></li>
                    </ul>
                    <button type="submit" class="btn btn-primary btn-block">Enregistrer</button>
                </form>
            </div>
            <div class="section-card">
                <h3 class="section-title">üîí S√©curit√©</h3>
                <form id="passForm">
                    <div class="form-group"><label>Mot de passe actuel</label><input type="password" class="form-control" id="currentPass" required></div>
                    <div class="form-row">
                        <div class="form-group"><label>Nouveau mot de passe</label><input type="password" class="form-control" id="newPass" minlength="8" required></div>
                        <div class="form-group"><label>Confirmer</label><input type="password" class="form-control" id="confirmPass" required></div>
                    </div>
                    <button type="submit" class="btn btn-outline">Changer le mot de passe</button>
                </form>
            </div>
            <div class="section-card">
                <h3 class="section-title">üë§ Compte</h3>
                <ul class="settings-list">
                    <li class="settings-item"><div><h4>D√©connexion</h4><p>Se d√©connecter de cet appareil</p></div><button class="btn btn-outline" onclick="logout()">D√©connexion</button></li>
                    <li class="settings-item"><div><h4>Supprimer mon compte</h4><p>Cette action est irr√©versible</p></div><button class="btn btn-danger" onclick="deleteAccount()">Supprimer</button></li>
                </ul>
            </div>
        </div>
    </main>
    <nav class="mobile-nav"><div class="mobile-nav-items">
        <a href="discover.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>D√©couvrir</a>
        <a href="matches.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>Matchs</a>
        <a href="messages.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>Messages</a>
        <a href="profile.html" class="mobile-nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="7" r="4"/></svg>Profil</a>
    </div></nav>
    <script>
        const API='/api';
        const showAlert=(m,t='success')=>{document.getElementById('alertContainer').innerHTML=`<div class="alert alert-${t}">${m}</div>`;setTimeout(()=>document.getElementById('alertContainer').innerHTML='',4000);};
        document.getElementById('minAge').oninput=e=>document.getElementById('minAgeVal').textContent=e.target.value;
        document.getElementById('maxAge').oninput=e=>document.getElementById('maxAgeVal').textContent=e.target.value;
        document.getElementById('maxDist').oninput=e=>document.getElementById('maxDistVal').textContent=e.target.value;
        async function init(){
            try{const r=await fetch(`${API}/auth/me`,{credentials:'include'});const d=await r.json();if(!d.user)window.location.href='../login.html';
            const p=await fetch(`${API}/user/preferences`,{credentials:'include'}).then(r=>r.json());
            if(p.preferences){document.getElementById('minAge').value=p.preferences.min_age||18;document.getElementById('maxAge').value=p.preferences.max_age||50;document.getElementById('maxDist').value=p.preferences.max_distance||50;document.getElementById('photoOnly').checked=p.preferences.show_with_photo_only==1;document.getElementById('verifiedOnly').checked=p.preferences.show_verified_only==1;document.getElementById('minAgeVal').textContent=p.preferences.min_age||18;document.getElementById('maxAgeVal').textContent=p.preferences.max_age||50;document.getElementById('maxDistVal').textContent=p.preferences.max_distance||50;}}catch(e){}
        }
        document.getElementById('prefsForm').onsubmit=async e=>{e.preventDefault();try{await fetch(`${API}/user/preferences`,{method:'PUT',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({min_age:+document.getElementById('minAge').value,max_age:+document.getElementById('maxAge').value,max_distance:+document.getElementById('maxDist').value,show_with_photo_only:document.getElementById('photoOnly').checked,show_verified_only:document.getElementById('verifiedOnly').checked})});showAlert('Pr√©f√©rences enregistr√©es !');}catch(e){showAlert('Erreur','error');}};
        document.getElementById('passForm').onsubmit=async e=>{e.preventDefault();if(document.getElementById('newPass').value!==document.getElementById('confirmPass').value){showAlert('Les mots de passe ne correspondent pas','error');return;}try{const r=await fetch(`${API}/auth/change-password`,{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({current_password:document.getElementById('currentPass').value,new_password:document.getElementById('newPass').value})});const d=await r.json();if(d.success){showAlert('Mot de passe modifi√© !');e.target.reset();}else showAlert(d.error||'Erreur','error');}catch(e){showAlert('Erreur','error');}};
        async function logout(){await fetch(`${API}/auth/logout`,{method:'POST',credentials:'include'});window.location.href='../index.html';}
        async function deleteAccount(){if(!confirm('Supprimer votre compte ? Cette action est irr√©versible.'))return;if(!confirm('Derni√®re confirmation : toutes vos donn√©es seront perdues.'))return;await fetch(`${API}/user/delete`,{method:'POST',credentials:'include'});alert('Compte supprim√©.');window.location.href='../index.html';}
        document.addEventListener('DOMContentLoaded',init);
    </script>
</body>
</html>
